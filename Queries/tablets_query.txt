### To extract all the information on tablets (cuneiform documents) copy the following query to the MySql prompt. The queries have been created with MySql 9.2 and may need to be adjusted if used with other versions.

### The name of the output file on the last line may need to be preceded by the path to the location WHERE the file is saved. You might also need to add the path to folder you want to save the final TSV.file to into the file .my.conf.


SELECT 'TabletID', 'Orig. TabletID', 'Museum nr', 'Excavation_NR', 'Publication', 'Archive', 'Text type', 'Subtype', 'Main Objects', 'Place of writing', 'Babylonian date (D.M.Y King)', 'Reign', 'Reign order', 'Julian date', 'Comments', 'CDLI', 'BM', 'Nabucco', 'Achemenet', 'Oracc', 'Author', 'Attestation ids', 'Orig. Attestation ids'
UNION
SELECT distinct concat('T', lpad(t.TabletID, 5,0)),
t.TabletID, 
REGEXP_REPLACE(t.MuseumNr, '\t$', ''), 
t.Excavation_NR, 
t.PublicationTablet, 
ar.ArchiveName, ty.Type, 
(SELECT DISTINCT GROUP_CONCAT(DISTINCT stype.SubTypeGroup SEPARATOR '; ') FROM s_subtypes stype left join x_mentionedsubtypesobjects mstype ON stype.SubTypeID = mstype.SubTypeID WHERE mstype.TabletID = t.TabletID) AS subtype,
(SELECT DISTINCT GROUP_CONCAT(DISTINCT ob.Object SEPARATOR '; ') FROM s_objects ob left join x_mentionedsubtypesobjects mst ON mst.ObjectID = ob.ObjectID WHERE mst.TabletID = t.TabletID) AS objects,
loc.LocName, 
CONCAT(t._day, ".", t._month, ".", t._year, " ", k.King), 
k.King,
(SELECT ro.Number FROM reignOrder ro WHERE ro.Name = k.King),
t.JulianDate, 
REPLACE(REPLACE(t.comments, '\r', ''), '\n', '') AS comments, 
t.CDLI_URL, 
t.Britich_Museum_URL, 
t.Nabucco_URL, t.Achemenet_URL, t.OrAcc_URL, 
t.Author,
GROUP_CONCAT(DISTINCT concat('A', lpad(a.AttPID, 5, 0)) SEPARATOR '; '),
GROUP_CONCAT(DISTINCT a.AttPID SEPARATOR '; ')
FROM e_tablets t
LEFT JOIN c_archives ar ON ar.ArchiveID = t.ArchiveID 
LEFT JOIN s_types ty ON ty.TypeID = t.TypeID 
LEFT JOIN s_localities loc ON loc.LocalityID = t.PlaceOfWritingID
LEFT JOIN s_kings k ON k.KingID = t.KingID
LEFT JOIN e_attestations a ON a.TabletID = t.TabletID
GROUP BY t.TabletID, t.MuseumNr, t.Excavation_NR, t.PublicationTablet, ar.ArchiveName, ty.Type, subtype
INTO OUTFILE '<path_to_folder>/tablets_minedProsobab.tsv';

